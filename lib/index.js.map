{"version":3,"sources":["../src/index.ts"],"sourcesContent":["export type UrlOptions = {\n  queryParams?: {\n    [x: string]: any;\n  };\n  hash?: string;\n  path?: string | null;\n  returnAbsoluteUrl?: boolean;\n};\n\nconst isEmpty = (value: any) => value === null || value === undefined;\n\nconst buildUrl = (\n  inputUrl?: string | UrlOptions,\n  options?: UrlOptions,\n) => {\n  let url: URL;\n  let isValidInputUrl = false;\n\n  try {\n    url = new URL(inputUrl as string);\n  } catch (error) {\n    isValidInputUrl = true;\n\n    if (typeof inputUrl === \"string\") {\n      const host = typeof window === \"undefined\"\n        ? \"http://example.com\"\n        : window.location.origin;\n\n      url = new URL(`${host}/${inputUrl.replace(/^\\/|\\/$/g, \"\")}`);\n    } else {\n      url = typeof window === \"undefined\"\n        ? new URL(\"http://example.com\")\n        : new URL(window.location.href);\n    }\n  }\n\n  const _options = typeof inputUrl === \"string\" ? options : inputUrl;\n\n  if (_options?.queryParams) {\n    for (const key in _options.queryParams) {\n      if (Object.prototype.hasOwnProperty.call(_options.queryParams, key)) {\n        const element = _options.queryParams[key];\n\n        if (isEmpty(element)) {\n          url.searchParams.delete(key);\n        } else {\n          url.searchParams.set(key, element);\n        }\n      }\n    }\n  }\n\n  if (_options?.path) {\n    url.pathname = _options.path;\n  }\n\n  if (_options?.path === null) {\n    url.pathname = \"\";\n  }\n\n  if (_options?.hash) {\n    url.hash = _options.hash;\n  }\n\n  if (isValidInputUrl && !_options?.returnAbsoluteUrl) {\n    return url.pathname + url.search + url.hash;\n  }\n\n  return url.toString();\n};\n\nexport { buildUrl };\n"],"mappings":";AASA,IAAM,UAAU,CAAC,UAAe,UAAU,QAAQ,UAAU;AAE5D,IAAM,WAAW,CACf,UACA,YACG;AACH,MAAI;AACJ,MAAI,kBAAkB;AAEtB,MAAI;AACF,UAAM,IAAI,IAAI,QAAkB;AAAA,EAClC,SAAS,OAAO;AACd,sBAAkB;AAElB,QAAI,OAAO,aAAa,UAAU;AAChC,YAAM,OAAO,OAAO,WAAW,cAC3B,uBACA,OAAO,SAAS;AAEpB,YAAM,IAAI,IAAI,GAAG,IAAI,IAAI,SAAS,QAAQ,YAAY,EAAE,CAAC,EAAE;AAAA,IAC7D,OAAO;AACL,YAAM,OAAO,WAAW,cACpB,IAAI,IAAI,oBAAoB,IAC5B,IAAI,IAAI,OAAO,SAAS,IAAI;AAAA,IAClC;AAAA,EACF;AAEA,QAAM,WAAW,OAAO,aAAa,WAAW,UAAU;AAE1D,MAAI,UAAU,aAAa;AACzB,eAAW,OAAO,SAAS,aAAa;AACtC,UAAI,OAAO,UAAU,eAAe,KAAK,SAAS,aAAa,GAAG,GAAG;AACnE,cAAM,UAAU,SAAS,YAAY,GAAG;AAExC,YAAI,QAAQ,OAAO,GAAG;AACpB,cAAI,aAAa,OAAO,GAAG;AAAA,QAC7B,OAAO;AACL,cAAI,aAAa,IAAI,KAAK,OAAO;AAAA,QACnC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAEA,MAAI,UAAU,MAAM;AAClB,QAAI,WAAW,SAAS;AAAA,EAC1B;AAEA,MAAI,UAAU,SAAS,MAAM;AAC3B,QAAI,WAAW;AAAA,EACjB;AAEA,MAAI,UAAU,MAAM;AAClB,QAAI,OAAO,SAAS;AAAA,EACtB;AAEA,MAAI,mBAAmB,CAAC,UAAU,mBAAmB;AACnD,WAAO,IAAI,WAAW,IAAI,SAAS,IAAI;AAAA,EACzC;AAEA,SAAO,IAAI,SAAS;AACtB;","names":[]}