{"version":3,"file":"build-url.umd.js","sources":["../src/index.ts"],"sourcesContent":["export type UrlOptions = {\n  queryParams?: {\n    [x: string]: any;\n  };\n  hash?: string;\n  path?: string | null;\n  returnAbsoluteUrl?: boolean;\n};\n\nconst isEmpty = (value: any) => value === null || value === undefined;\n\nconst buildUrl = (\n  inputUrl?: string | UrlOptions,\n  options?: UrlOptions,\n) => {\n  let url: URL;\n  let isValidInputUrl = false;\n\n  try {\n    url = new URL(inputUrl as string);\n  } catch (error) {\n    isValidInputUrl = true;\n\n    if (typeof inputUrl === \"string\") {\n      const host = typeof window === \"undefined\"\n        ? \"http://example.com\"\n        : window.location.origin;\n\n      url = new URL(`${host}/${inputUrl.replace(/^\\/|\\/$/g, \"\")}`);\n    } else {\n      url = typeof window === \"undefined\"\n        ? new URL(\"http://example.com\")\n        : new URL(window.location.href);\n    }\n  }\n\n  const _options = typeof inputUrl === \"string\" ? options : inputUrl;\n\n  if (_options?.queryParams) {\n    for (const key in _options.queryParams) {\n      if (Object.prototype.hasOwnProperty.call(_options.queryParams, key)) {\n        const element = _options.queryParams[key];\n\n        if (isEmpty(element)) {\n          url.searchParams.delete(key);\n        } else {\n          url.searchParams.set(key, element);\n        }\n      }\n    }\n  }\n\n  if (_options?.path) {\n    url.pathname = _options.path;\n  }\n\n  if (_options?.path === null) {\n    url.pathname = \"\";\n  }\n\n  if (_options?.hash) {\n    url.hash = _options.hash;\n  }\n\n  if (isValidInputUrl && !_options?.returnAbsoluteUrl) {\n    return url.pathname + url.search + url.hash;\n  }\n\n  return url.toString();\n};\n\nexport { buildUrl };\n"],"names":["isEmpty","value","undefined","buildUrl","inputUrl","options","url","isValidInputUrl","URL","error","host","window","location","origin","replace","href","_options","queryParams","key","Object","prototype","hasOwnProperty","call","element","searchParams","set","path","pathname","hash","returnAbsoluteUrl","search","toString"],"mappings":";;;;;EASA,IAAMA,OAAO,GAAG,SAAVA,OAAOA,CAAIC,KAAU,EAAA;EAAA,EAAA,OAAKA,KAAK,KAAK,IAAI,IAAIA,KAAK,KAAKC,SAAS,CAAA;EAAA,CAAA,CAAA;AAE/DC,MAAAA,QAAQ,GAAG,SAAXA,QAAQA,CACZC,QAA8B,EAC9BC,OAAoB,EAClB;EACF,EAAA,IAAIC,GAAQ,CAAA;IACZ,IAAIC,eAAe,GAAG,KAAK,CAAA;IAE3B,IAAI;EACFD,IAAAA,GAAG,GAAG,IAAIE,GAAG,CAACJ,QAAkB,CAAC,CAAA;KAClC,CAAC,OAAOK,KAAK,EAAE;EACdF,IAAAA,eAAe,GAAG,IAAI,CAAA;EAEtB,IAAA,IAAI,OAAOH,QAAQ,KAAK,QAAQ,EAAE;EAChC,MAAA,IAAMM,IAAI,GAAG,OAAOC,MAAM,KAAK,WAAW,GACtC,oBAAoB,GACpBA,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAA;EAE1BP,MAAAA,GAAG,GAAG,IAAIE,GAAG,CAAIE,IAAI,GAAIN,GAAAA,GAAAA,QAAQ,CAACU,OAAO,CAAC,UAAU,EAAE,EAAE,CAAG,CAAC,CAAA;EAC7D,KAAA,MAAM;QACLR,GAAG,GAAG,OAAOK,MAAM,KAAK,WAAW,GAC/B,IAAIH,GAAG,CAAC,oBAAoB,CAAC,GAC7B,IAAIA,GAAG,CAACG,MAAM,CAACC,QAAQ,CAACG,IAAI,CAAC,CAAA;EAClC,KAAA;EACF,GAAA;IAED,IAAMC,QAAQ,GAAG,OAAOZ,QAAQ,KAAK,QAAQ,GAAGC,OAAO,GAAGD,QAAQ,CAAA;EAElE,EAAA,IAAIY,QAAQ,IAAA,IAAA,IAARA,QAAQ,CAAEC,WAAW,EAAE;EACzB,IAAA,KAAK,IAAMC,GAAG,IAAIF,QAAQ,CAACC,WAAW,EAAE;EACtC,MAAA,IAAIE,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACN,QAAQ,CAACC,WAAW,EAAEC,GAAG,CAAC,EAAE;EACnE,QAAA,IAAMK,OAAO,GAAGP,QAAQ,CAACC,WAAW,CAACC,GAAG,CAAC,CAAA;EAEzC,QAAA,IAAIlB,OAAO,CAACuB,OAAO,CAAC,EAAE;EACpBjB,UAAAA,GAAG,CAACkB,YAAY,CAAO,QAAA,CAAA,CAACN,GAAG,CAAC,CAAA;EAC7B,SAAA,MAAM;YACLZ,GAAG,CAACkB,YAAY,CAACC,GAAG,CAACP,GAAG,EAAEK,OAAO,CAAC,CAAA;EACnC,SAAA;EACF,OAAA;EACF,KAAA;EACF,GAAA;EAED,EAAA,IAAIP,QAAQ,IAAA,IAAA,IAARA,QAAQ,CAAEU,IAAI,EAAE;EAClBpB,IAAAA,GAAG,CAACqB,QAAQ,GAAGX,QAAQ,CAACU,IAAI,CAAA;EAC7B,GAAA;IAED,IAAI,CAAAV,QAAQ,IAARA,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,QAAQ,CAAEU,IAAI,MAAK,IAAI,EAAE;MAC3BpB,GAAG,CAACqB,QAAQ,GAAG,EAAE,CAAA;EAClB,GAAA;EAED,EAAA,IAAIX,QAAQ,IAAA,IAAA,IAARA,QAAQ,CAAEY,IAAI,EAAE;EAClBtB,IAAAA,GAAG,CAACsB,IAAI,GAAGZ,QAAQ,CAACY,IAAI,CAAA;EACzB,GAAA;IAED,IAAIrB,eAAe,IAAI,EAACS,QAAQ,YAARA,QAAQ,CAAEa,iBAAiB,CAAE,EAAA;MACnD,OAAOvB,GAAG,CAACqB,QAAQ,GAAGrB,GAAG,CAACwB,MAAM,GAAGxB,GAAG,CAACsB,IAAI,CAAA;EAC5C,GAAA;EAED,EAAA,OAAOtB,GAAG,CAACyB,QAAQ,EAAE,CAAA;EACvB;;;;;;;;"}