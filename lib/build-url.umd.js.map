{"version":3,"file":"build-url.umd.js","sources":["../src/index.ts"],"sourcesContent":["export type UrlOptions = {\n  queryParams?: {\n    [x: string]: any;\n  };\n  hash?: string;\n  path?: string | null;\n  returnAbsoluteUrl?: boolean;\n};\n\nconst isEmpty = (value: any) => value === null || value === undefined;\n\nconst buildUrl = (\n  inputUrl?: string | UrlOptions,\n  options?: UrlOptions,\n) => {\n  let url: URL;\n  let isValidInputUrl = false;\n\n  try {\n    url = new URL(inputUrl as string);\n  } catch (error) {\n    isValidInputUrl = true;\n\n    if (typeof inputUrl === \"string\") {\n      const host = typeof window === \"undefined\"\n        ? \"http://example.com\"\n        : window.location.origin;\n\n      url = new URL(`${host}/${inputUrl.replace(/^\\/|\\/$/g, \"\")}`);\n    } else {\n      url = typeof window === \"undefined\"\n        ? new URL(\"http://example.com\")\n        : new URL(window.location.href);\n    }\n  }\n\n  const _options = typeof inputUrl === \"string\" ? options : inputUrl;\n\n  if (_options?.queryParams) {\n    for (const key in _options.queryParams) {\n      if (Object.prototype.hasOwnProperty.call(_options.queryParams, key)) {\n        const element = _options.queryParams[key];\n\n        if (isEmpty(element)) {\n          url.searchParams.delete(key);\n        } else {\n          url.searchParams.set(key, element);\n        }\n      }\n    }\n  }\n\n  if (_options?.path) {\n    url.pathname = _options.path;\n  }\n\n  if (_options?.path === null) {\n    url.pathname = \"\";\n  }\n\n  if (_options?.hash) {\n    url.hash = _options.hash;\n  }\n\n  if (isValidInputUrl && !_options?.returnAbsoluteUrl) {\n    return url.pathname + url.search + url.hash;\n  }\n\n  return url.toString();\n};\n\nexport { buildUrl };\n"],"names":["isEmpty","value","inputUrl","options","url","isValidInputUrl","URL","error","host","window","location","origin","replace","href","_options","queryParams","key","Object","prototype","hasOwnProperty","call","element","searchParams","set","path","pathname","hash","returnAbsoluteUrl","toString","search"],"mappings":"kOASA,IAAMA,EAAU,SAACC,GAAU,OAAKA,OAAqC,aAEpD,SACfC,EACAC,GAEA,IAAIC,EACAC,GAAkB,EAEtB,IACED,EAAM,IAAIE,IAAIJ,EACf,CAAC,MAAOK,GAGP,GAFAF,GAAkB,EAEM,iBAAbH,EAAuB,CAChC,IAAMM,EAAyB,oBAAXC,OAChB,qBACAA,OAAOC,SAASC,OAEpBP,EAAM,IAAIE,IAAOE,EAAQN,IAAAA,EAASU,QAAQ,WAAY,IACvD,MACCR,EAAwB,oBAAXK,OACT,IAAIH,IAAI,sBACR,IAAIA,IAAIG,OAAOC,SAASG,KAE/B,CAED,IAAMC,EAA+B,iBAAbZ,EAAwBC,EAAUD,EAE1D,GAAIY,MAAAA,GAAAA,EAAUC,YACZ,IAAK,IAAMC,KAAOF,EAASC,YACzB,GAAIE,OAAOC,UAAUC,eAAeC,KAAKN,EAASC,YAAaC,GAAM,CACnE,IAAMK,EAAUP,EAASC,YAAYC,GAEjChB,EAAQqB,GACVjB,EAAIkB,oBAAoBN,GAExBZ,EAAIkB,aAAaC,IAAIP,EAAKK,EAE7B,CAgBL,OAZIP,MAAAA,GAAAA,EAAUU,OACZpB,EAAIqB,SAAWX,EAASU,MAGH,QAAnBV,MAAAA,OAAAA,EAAAA,EAAUU,QACZpB,EAAIqB,SAAW,IAGL,MAARX,GAAAA,EAAUY,OACZtB,EAAIsB,KAAOZ,EAASY,OAGlBrB,GAAoBS,MAAAA,GAAAA,EAAUa,kBAI3BvB,EAAIwB,WAHFxB,EAAIqB,SAAWrB,EAAIyB,OAASzB,EAAIsB,IAI3C"}